buildscript {
    ext {
        springBootVersion = "2.3.1.RELEASE"
        gradleDocker = "0.22.1"
        springCloudVersion = "Hoxton.SR4"
    }

    repositories {
        mavenCentral()
    }

    dependencies {
        classpath "org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}"
        classpath "gradle.plugin.com.palantir.gradle.docker:gradle-docker:${gradleDocker}"
    }
}

plugins {
    id 'org.springframework.boot' version '2.2.7.RELEASE'
    id 'io.spring.dependency-management' version '1.0.9.RELEASE'
    id 'java'
    id 'java-library'
    id 'application'
}

group = 'co.edu.cedesistemas'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '11'

allprojects {
    apply plugin: 'java-library'
    apply plugin: 'idea'
    apply plugin: 'java'
    apply plugin: 'io.spring.dependency-management'

    repositories {
        jcenter()
        mavenCentral()
    }

    dependencyManagement {
        imports {
            mavenBom "org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}"
        }
    }
}

configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
}

repositories {
    mavenLocal()
    mavenCentral()
    jcenter()
    mavenLocal()
}

ext {
    set('springCloudVersion', "Hoxton.SR4")
    dockerGroup = 'registry.cedesistemas.internal'
    dockerRegistryPort = '5000'
    versions = [
            "spring": "5.2.7.RELEASE",
            "gelf": "1.1.16",
            "logstash_gelf": "1.13.0",
            "springdoc": "1.4.3",
            "mockito": "3.1.0",
            "hamcrest": "2.1",
            "restAssured": "4.1.2",
            "lombok": "1.18.12",
            "gson": "2.8.5",
            "spring": "5.2.7.RELEASE",
            "jackson": "2.11.1",
            "jupiter": "5.6.2",
            "graphql": "5.0.2",
            "graphqltools": "5.2.4"
    ]
}

dependencies {
    //implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation "org.springframework:spring-web:${versions.spring}"

    compileOnly "org.projectlombok:lombok:${versions.lombok}"
    annotationProcessor "org.projectlombok:lombok:${versions.lombok}"
    testImplementation('org.springframework.boot:spring-boot-starter-test') {
        exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'
    }
    testImplementation "io.rest-assured:rest-assured:${versions.restAssured}"
    testImplementation "io.rest-assured:json-path:${versions.restAssured}"
    testImplementation "io.rest-assured:xml-path:${versions.restAssured}"
    testImplementation "org.mockito:mockito-core:${versions.mockito}"
    testImplementation "org.hamcrest:hamcrest:${versions.hamcrest}"
    testImplementation 'org.springframework.security:spring-security-test'
}